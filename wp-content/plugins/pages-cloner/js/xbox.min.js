XBOX.events=function(e,o,n){"use strict";function t(e){return void 0===e||e===!1||0===n.trim(e).length}var i,h={};return h.init=function(){var e=n(".xbox");h.on_change_colorpicker(e),h.on_change_code_editor(e),h.on_change_file(e),h.on_change_image_selector(e),h.on_change_icon_selector(e),h.on_change_number(e),h.on_change_oembed(e),h.on_change_radio(e),h.on_change_checkbox(e),h.on_change_switcher(e),h.on_change_select(e),h.on_change_text(e),h.on_change_textarea(e),h.on_change_wp_editor(e)},h.on_change_colorpicker=function(e){e.on("change",".xbox-type-colorpicker .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"colorpicker")})},h.on_change_code_editor=function(e){e.find(".xbox-code-editor").each(function(e,o){var t=ace.edit(n(o).attr("id"));t.getSession().on("change",function(e){n(o).trigger("xbox_changed_value",t.getValue()),h.show_hide_row(n(o),t.getValue(),"code_editor")})})},h.on_change_file=function(e){e.on("change",".xbox-type-file .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"file")}),e.on("xbox_after_add_files",".xbox-type-file .xbox-field",function(e,o,t){var i;t.multiple?(i=[],n(o).each(function(e,o){i.push(o.url)})):n(o).each(function(e,o){i=o.url}),n(this).find(".xbox-element").trigger("xbox_changed_value",[i]),h.show_hide_row(n(this),[i],"file")})},h.on_change_image_selector=function(e){e.on("imgSelectorChanged",".xbox-type-image_selector .xbox-element",function(){if(n(this).closest(".xbox-image-selector").data("image-selector").like_checkbox){var e=[];n(this).closest(".xbox-radiochecks").find("input[type=checkbox]:checked").each(function(o,t){e.push(n(this).val())}),n(this).trigger("xbox_changed_value",[e]),h.show_hide_row(n(this),[e],"image_selector")}else n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"image_selector")})},h.on_change_icon_selector=function(e){e.on("change",".xbox-type-icon_selector .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"icon_selector")})},h.on_change_number=function(e){e.on("change",".xbox-type-number .xbox-unit-number",function(){n(this).closest(".xbox-field").find(".xbox-element").trigger("input")}),e.on("input",".xbox-type-number .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"number")}),e.on("change",".xbox-type-number .xbox-element",function(){var e=n(this).val(),o=["auto","initial","inherit"];n.inArray(e,o)<0&&(e=e.toString().replace(/[^0-9.\-]/g,""));var t=n(this).closest(".xbox-field");i.set_field_value(t,e,t.find("input.xbox-unit-number").val()),n(this).trigger("xbox_changed_value",e),h.show_hide_row(n(this),e,"number")})},h.on_change_oembed=function(e){e.on("change",".xbox-type-oembed .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"oembed")})},h.on_change_radio=function(e){e.on("ifChecked",".xbox-type-radio .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"radio")})},h.on_change_checkbox=function(e){e.on("ifChanged",".xbox-type-checkbox .xbox-element",function(){var e=[];n(this).closest(".xbox-radiochecks").find("input[type=checkbox]:checked").each(function(o,t){e.push(n(this).val())}),n(this).trigger("xbox_changed_value",[e]),h.show_hide_row(n(this),[e],"checkbox")})},h.on_change_switcher=function(e){e.on("statusChange",".xbox-type-switcher .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"switcher")})},h.on_change_select=function(e){e.on("change",".xbox-type-select .xbox-element",function(e){var o=n(this).find('input[type="hidden"]').val();n(this).trigger("xbox_changed_value",o),h.show_hide_row(n(this),o,"select")})},h.on_change_text=function(e){e.on("input",".xbox-type-text .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"text")})},h.on_change_textarea=function(e){e.on("input",".xbox-type-textarea .xbox-element",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"textarea")})},h.on_change_wp_editor=function(e){var o=e.find(".xbox-type-wp_editor textarea.wp-editor-area");e.on("input",".xbox-type-wp_editor textarea.wp-editor-area",function(){n(this).trigger("xbox_changed_value",n(this).val()),h.show_hide_row(n(this),n(this).val(),"wp_editor")}),setTimeout(function(){o.each(function(e,o){var t=n(o).attr("id"),i=tinymce.get(t);i&&i.on("change input",function(e){i.getContent();n(o).trigger("xbox_changed_value",i.getContent()),h.show_hide_row(n(o),i.getContent(),"wp_editor")})})},1e3)},h.show_hide_row=function(e,o,a){var c=e.closest(".xbox-row"),r="",s="==",_=c.siblings(".xbox-row");_.each(function(e,a){var _=n(a),x=_.data("show-hide"),l=x.show_if,d=x.hide_if,g=!0,u=!1,b=!0,f=!0;return(t(l)||t(l[0]))&&(b=!1),(t(d)||t(d[0]))&&(f=!1),c.attr("class").indexOf(l[0])<0||(b&&(n.isArray(l[0])||(2==l.length?r=l[1]:3==l.length&&(r=l[2],s=t(l[1])?s:l[1],s="="==s?"==":s),n.inArray(s,["==","!=",">",">=","<","<="])>-1?g=i.compare_values_by_operator(o,s,r):n.inArray(s,["in","not in"])>-1&&!t(r)&&n.isArray(r)&&(g="in"==s?n.inArray(o,r)>-1:n.inArray(o,r)==-1))),f&&(n.isArray(d[0])||(2==d.length?r=d[1]:3==d.length&&(r=d[2],s=t(d[1])?s:d[1],s="="==s?"==":s),n.inArray(s,["==","!=",">",">=","<","<="])>-1?u=i.compare_values_by_operator(o,s,r):n.inArray(s,["in","not in"])>-1&&!t(r)&&n.isArray(r)&&(u="in"==s?n.inArray(o,r)>-1:n.inArray(o,r)==-1))),b&&(f?g?u?h.hide_row(_):h.show_row(_):h.hide_row(_):g?h.show_row(_):h.hide_row(_)),void(f&&(u?h.hide_row(_):b?g?h.show_row(_):h.hide_row(_):h.show_row(_))))})},h.show_row=function(e){var o=e.data("show-hide"),n=parseInt(o.delay);"slide"==o.effect?e.slideDown(n,function(){e.hasClass("xbox-row-mixed")?e.css("display","inline-block"):e.css("display","block")}):e.fadeIn(n,function(){e.hasClass("xbox-row-mixed")?e.css("display","inline-block"):e.css("display","block")})},h.hide_row=function(e){var o=e.data("show-hide"),n=parseInt(o.delay);"slide"==o.effect?e.slideUp(n,function(){e.css("display","none")}):e.fadeOut(n,function(){e.css("display","none")})},n(function(){i=e.XBOX,h.init()}),h}(window,document,jQuery);
window.XBOX=function(e,t,i){"use strict";function o(e){return void 0===e||e===!1||0===i.trim(e).length}function n(e,t){if(t=t||",","checkbox"!=e.attr("type"))return"";var i=e.filter(":checked").map(function(){return this.value}).get().join(t);return i}function r(){var i=e,o="inner";return"innerWidth"in e||(o="client",i=t.documentElement||t.body),{width:i[o+"Width"],height:i[o+"Height"]}}var a={duplicate:!1,media:{frames:{}}};return a.init=function(){var o=i(".xbox");i(e).resize(function(){r().width<=850?i("#post-body").addClass("xbox-columns-1"):i("#post-body").removeClass("xbox-columns-1")}).resize(),a.init_switcher(),a.init_spinner(),a.init_tab(),a.init_tooltip(),a.init_checkbox(),a.init_image_selector(),a.init_dropdown(),a.init_colorpicker(),a.init_code_editor(),a.init_sortable_preview_items(),a.init_sortable_repeatable_items(),a.init_sortable_group_items(),a.load_oembeds(),a.load_icons_for_icon_selector(),o.on("click","#xbox-reset",a.on_click_reset_values),o.on("click","#xbox-import",a.on_click_import_values),o.on("ifClicked",".xbox-type-import .xbox-radiochecks input",a.toggle_import),o.on("click",".xbox-type-import .xbox-radiochecks input",a.toggle_import),o.on("click",".xbox-add-group-item",a.new_group_item),o.on("click",".xbox-duplicate-group-item",a.new_group_item),o.on("click",".xbox-remove-group-item",a.remove_group_item),o.on("click",".xbox-group-control-item",a.on_click_group_control_item),o.on("sort_group_items",".xbox-group-wrap",a.sort_group_items),o.on("sort_group_control_items",".xbox-group-control",a.sort_group_control_items),o.on("click",".xbox-add-repeatable-item",a.add_repeatable_item),o.on("click",".xbox-remove-repeatable-item",a.remove_repeatable_item),o.on("sort_repeatable_items",".xbox-repeatable-wrap",a.sort_repeatable_items),o.on("click",".xbox-upload-file, .xbox-preview-item .xbox-preview-handler",a.wp_media_upload),o.on("click",".xbox-remove-preview",a.remove_preview_item),o.on("click",".xbox-get-oembed",a.get_oembed),o.on("click",".xbox-get-image",a.get_image_from_url),o.on("focusout",".xbox-type-colorpicker input",a.on_focusout_input_colorpicker),o.on("input",".xbox-type-textarea textarea.xbox-element",a.on_change_textarea),o.on("click",".xbox-section.xbox-toggle-1 .xbox-section-header, .xbox-section .xbox-toggle-icon",a.toggle_section),i(t).on("click",a.hide_units_dropdown),o.on("click",".xbox-type-number .xbox-unit-has-picker-1",a.toggle_units_dropdown),o.on("click",".xbox-units-dropdown .xbox-unit-item",a.set_unit_number),a.sticky_submit_buttons()},a.sticky_submit_buttons=function(){i(e).scroll(function(){var t=i(".xbox-header"),o=t.find(".xbox-header-actions"),n=i("#wp-admin-bar-my-account");o.length&&n.length&&o.data("sticky")&&(i(e).scrollTop()>t.offset().top?(n.css("padding-right",o.width()+25),o.addClass("xbox-actions-sticky")):(n.css("padding-right",""),o.removeClass("xbox-actions-sticky")))})},a.hide_units_dropdown=function(){i(".xbox-units-dropdown").slideUp(200)},a.toggle_units_dropdown=function(e){i(e.target).hasClass("xbox-spinner-handler")||i(e.target).hasClass("xbox-spinner-control")||(e.stopPropagation(),i(this).find(".xbox-units-dropdown").slideToggle(200))},a.set_unit_number=function(e){var t=i(this);t.closest(".xbox-unit").find("input.xbox-unit-number").val(t.data("value")).trigger("change"),t.closest(".xbox-unit").find("span").text(t.text())},a.load_icons_for_icon_selector=function(e){var t=[];i(".xbox-type-icon_selector").each(function(e,o){var n=i(o).data("field-id"),r=i(o).find(".xbox-icons-wrap").data("options");i.inArray(n,t)<0&&r.load_with_ajax&&t.push(n)}),i.each(t,function(e,t){a.load_icon_selector(i(".xbox-field-id-"+t))}),i(".xbox").on("input",".xbox-search-icon",function(e){e.preventDefault();var t=i(this).val(),o=i(this).closest(".xbox-field").find(".xbox-icons-wrap");a.filter_items(t,o,".xbox-item-icon-selector")}),i(".xbox").on("click",".xbox-icon-actions .xbox-btn",function(e){var t=i(this).data("search"),o=i(this).closest(".xbox-field").find(".xbox-icons-wrap");a.filter_items(t,o,".xbox-item-icon-selector")}),i(".xbox").on("click",".xbox-icons-wrap .xbox-item-icon-selector",function(e){var t=i(this).closest(".xbox-field"),o=t.find(".xbox-icons-wrap"),n=o.data("options");i(this).addClass(n.active_class).siblings().removeClass(n.active_class),t.find("input.xbox-element").val(i(this).data("value")).trigger("change"),t.find(".xbox-icon-active").html(i(this).html())})},a.filter_items=function(e,t,n){t.find(n).each(function(t,n){var r=i(n).data("key");o(r)?i(n).hide():"all"==e||r.indexOf(e)>-1?i(n).show():i(n).hide()})},a.load_icon_selector=function(e){var t=e.find(".xbox-icons-wrap").data("options");return i.ajax({type:"post",dataType:"json",url:XBOX_JS.ajax_url,data:{action:"xbox_get_items",class_name:t.ajax_data.class_name,function_name:t.ajax_data.function_name,ajax_nonce:XBOX_JS.ajax_nonce},beforeSend:function(){e.find(".xbox-icons-wrap").prepend("<i class='xbox-icon xbox-icon-spinner xbox-icon-spin xbox-loader'></i>")},success:function(o){if(o&&o.success){i.each(o.items,function(t,o){var n="font "+t,r="icon font";n.indexOf(".svg")>-1&&(n=n.split("/"),n=n[n.length-1],r="svg");var a=i("<div />",{class:"xbox-item-icon-selector","data-value":t,"data-key":n,"data-type":r});a.html(o),e.find(".xbox-icons-wrap").append(a)}),e.find(".xbox-icons-wrap .xbox-item-icon-selector").css({width:t.width,height:t.height});var n={};n["font-size"]=parseInt(t.width)/2,n["line-height"]=parseInt(t.height)-14+"px",e.find(".xbox-icons-wrap .xbox-item-icon-selector i").css(n)}},error:function(e,t,i){},complete:function(t,i){e.find(".xbox-icons-wrap").find(".xbox-loader").remove()}}),""},a.toggle_section=function(e){e.stopPropagation();var t=i(this),o=t.closest(".xbox-section.xbox-toggle-1"),n=o.find(".xbox-section-body"),r=o.data("toggle"),a=o.find(".xbox-toggle-icon").first();if(!t.hasClass("xbox-section-header")||"icon"!=r.target){var c={duration:parseInt(r.speed),complete:function(){"block"==n.css("display")?a.find("i").removeClass(r.close_icon).addClass(r.open_icon):a.find("i").removeClass(r.open_icon).addClass(r.close_icon)}};return"slide"==r.effect?n.slideToggle(c):"fade"==r.effect&&n.fadeToggle(c),!1}},a.toggle_import=function(e){var t=i(this),o=i(".xbox-wrap-input-file"),n=i(".xbox-wrap-input-url");(t.next("img").length||"from_file"!=t.val()&&"from_url"!=t.val())&&(o.hide(),n.hide()),"from_file"==t.val()&&(o.show(),n.hide()),"from_url"==t.val()&&(n.show(),o.hide())},a.on_change_textarea=function(e){i(this).text(i(this).val())},a.on_click_reset_values=function(e){var t=i(this),o=t.closest(".xbox-form");return i.xboxConfirm({title:XBOX_JS.text.reset_popup.title,content:XBOX_JS.text.reset_popup.content,confirm_class:"xbox-btn-blue",confirm_text:XBOX_JS.text.popup.accept_button,cancel_text:XBOX_JS.text.popup.cancel_button,onConfirm:function(){o.prepend('<input type="hidden" name="'+t.attr("name")+'" value="true">'),o.submit()},onCancel:function(){return!1}}),!1},a.on_click_import_values=function(e){var t=i(this),o=t.closest(".xbox-form");return o.length||(o=t.closest("form#post")),i.xboxConfirm({title:XBOX_JS.text.import_popup.title,content:XBOX_JS.text.import_popup.content,confirm_class:"xbox-btn-blue",confirm_text:XBOX_JS.text.popup.accept_button,cancel_text:XBOX_JS.text.popup.cancel_button,onConfirm:function(){o.prepend('<input type="hidden" name="'+t.attr("name")+'" value="true">'),o.submit()},onCancel:function(){return!1}}),!1},a.get_image_from_url=function(e){var t=i(this),n=t.closest(".xbox-field"),r=n.find(".xbox-element-text"),a=n.find(".xbox-wrap-preview");if(o(r.val()))return i.xboxConfirm({title:XBOX_JS.text.validation_url_popup.title,content:XBOX_JS.text.validation_url_popup.content,confirm_text:XBOX_JS.text.popup.accept_button,hide_cancel:!0}),!1;var c=a.data("image-class"),s=i("<li />",{class:"xbox-preview-item xbox-preview-image"});return s.html('<img src="'+r.val()+'" class="'+c+'"><a class="xbox-btn xbox-btn-iconize xbox-btn-small xbox-btn-red xbox-remove-preview"><i class="xbox-icon xbox-icon-times-circle"></i></a>'),a.fadeOut(400,function(){i(this).html("").show()}),n.find(".xbox-get-image i").addClass("xbox-icon-spin"),setTimeout(function(){a.html(s),n.find(".xbox-get-image i").removeClass("xbox-icon-spin")},1200),!1},a.load_oembeds=function(e){i(".xbox-type-oembed").each(function(e,t){i(t).find(".xbox-wrap-oembed").data("preview-onload")&&a.get_oembed(i(t).find(".xbox-get-oembed"))})},a.get_oembed=function(e){var t;t=i(e.currentTarget).length?i(e.currentTarget):e;var n=t.closest(".xbox-field"),r=n.find(".xbox-element-text"),a=n.find(".xbox-wrap-preview");return o(r.val())&&i(e.currentTarget).length?(i.xboxConfirm({title:XBOX_JS.text.validation_url_popup.title,content:XBOX_JS.text.validation_url_popup.content,confirm_text:XBOX_JS.text.popup.accept_button,hide_cancel:!0}),!1):(i.ajax({type:"post",dataType:"json",url:XBOX_JS.ajax_url,data:{action:"xbox_get_oembed",oembed_url:r.val(),preview_size:a.data("preview-size"),ajax_nonce:XBOX_JS.ajax_nonce},beforeSend:function(){a.fadeOut(400,function(){i(this).html("").show()}),n.find(".xbox-get-oembed i").addClass("xbox-icon-spin")},success:function(e){if(e)if(e.success){var t=i("<li />",{class:"xbox-preview-item xbox-preview-oembed"});t.html('<div class="xbox-oembed xbox-oembed-provider-'+e.provider+' xbox-element-oembed ">'+e.oembed+'<a class="xbox-btn xbox-btn-iconize xbox-btn-small xbox-btn-red xbox-remove-preview"><i class="xbox-icon xbox-icon-times-circle"></i></a></div>'),a.html(t)}else a.html(e.message)},error:function(e,t,i){},complete:function(e,t){n.find(".xbox-get-oembed i").removeClass("xbox-icon-spin")}}),!1)},a.wp_media_upload=function(e){if(void 0!==wp){var t=i(this),o=a.media;if(o.$field=t.closest(".xbox-field"),o.field_id=o.$field.closest(".xbox-row").data("field-id"),o.frame_id=o.$field.closest(".xbox").attr("id")+"_"+o.field_id,o.$upload_btn=o.$field.find(".xbox-upload-file"),o.$wrap_preview=o.$field.find(".xbox-wrap-preview"),o.multiple=o.$field.hasClass("xbox-has-multiple"),o.$preview_item=void 0,o.attachment_id=void 0,t.closest(".xbox-preview-item").length?o.$preview_item=t.closest(".xbox-preview-item"):o.multiple||(o.$preview_item=o.$field.find(".xbox-preview-item").first()),o.$preview_item&&(o.attachment_id=o.$preview_item.find(".xbox-attachment-id").val()),void 0!==o.frames[o.frame_id])return void o.frames[o.frame_id].open();o.frames[o.frame_id]=wp.media({title:o.$field.closest(".xbox-type-file").find(".xbox-element-label").first().text(),multiple:!!o.multiple&&"add"}),o.frames[o.frame_id].on("open",a.on_open_wp_media).on("select",a.on_select_wp_media),o.frames[o.frame_id].open()}},a.on_open_wp_media=function(e){var t=a.media,i=a.media.frames[t.frame_id].state().get("selection");if(o(t.attachment_id))return i.reset();var n=wp.media.attachment(t.attachment_id);n.fetch(),i.set(n?[n]:[])},a.on_select_wp_media=function(e){var t=a.media,o=t.frames[t.frame_id].state().get("selection").toJSON(),n=t.$wrap_preview.data("preview-size"),r=t.$wrap_preview.data("field-name"),c=t.$field.closest(".xbox-type-group").find(".xbox-group-control").data("image-field-id");t.$field.trigger("xbox_before_add_files",[o,a.media]),i(o).each(function(e,o){var s="",l="",x=i("<li />",{class:"xbox-preview-item xbox-preview-file"});"image"==o.type?(x.addClass("xbox-preview-image"),l='<img src="'+o.url+'" style="width: '+n.width+"; height: "+n.height+'" data-full-img="'+o.url+'" class="xbox-image xbox-preview-handler">'):"video"==o.type?(x.addClass("xbox-preview-video"),l='<div class="xbox-video">',l+='<video controls style="width: '+n.width+"; height: "+n.height+'"><source src="'+o.url+'" type="'+o.mime+'"></video>',l+="</div>"):l='<img src="'+o.icon+'" class="xbox-preview-icon-file xbox-preview-handler"><a href="'+o.url+'" class="xbox-preview-download-link">'+o.filename+'</a><span class="xbox-preview-mime xbox-preview-handler">'+o.mime+"</span>",t.multiple&&(s='<input type="hidden" name="'+t.$upload_btn.data("field-name")+'" value="'+o.url+'" class="xbox-element xbox-element-hidden">'),s+='<input type="hidden" name="'+r+'" value="'+o.id+'" class="xbox-attachment-id">',x.html(s+l+'<a class="xbox-btn xbox-btn-iconize xbox-btn-small xbox-btn-red xbox-remove-preview"><i class="xbox-icon xbox-icon-times-circle"></i></a>'),t.multiple?t.$preview_item?t.attachment_id!=o.id&&t.$preview_item.after(x):t.$wrap_preview.append(x):(t.$wrap_preview.html(x),t.$field.find(".xbox-element").attr("value",o.url),"image"==o.type&&(t.field_id==c&&a.synchronize_selector_preview_image(".xbox-control-image",t.$wrap_preview,"add",o.url),a.synchronize_selector_preview_image("",t.$wrap_preview,"add",o.url)))}),t.$field.trigger("xbox_after_add_files",[o,t])},a.remove_preview_item=function(e){var t=i(this),o=t.closest(".xbox-field"),n=o.closest(".xbox-row").data("field-id"),r=o.closest(".xbox-type-group").find(".xbox-group-control").data("image-field-id"),c=o.find(".xbox-wrap-preview"),s=o.hasClass("xbox-has-multiple");return o.trigger("xbox_before_remove_preview_item",[s]),s||o.find(".xbox-element").attr("value",""),t.closest(".xbox-preview-item").remove(),!s&&t.closest(".xbox-preview-item").hasClass("xbox-preview-image")&&(n==r&&a.synchronize_selector_preview_image(".xbox-control-image",c,"remove",""),a.synchronize_selector_preview_image("",c,"remove","")),o.find(".xbox-element").trigger("change"),o.trigger("xbox_after_remove_preview_item",[s]),!1},a.synchronize_selector_preview_image=function(e,t,n,r){e=e||t.data("synchronize-selector"),o(e)||(e=e.split(","),i.each(e,function(e,t){var o=i(t);o.closest(".xbox-type-group").length&&(o=o.closest(".xbox-group-control").length?o.closest(".xbox-group-control-item.xbox-active").find(t):o.closest(".xbox-group-item.xbox-active").find(t)),o.is("img")?o.fadeOut(300,function(){o.closest(".xbox-group-control").length?o.attr("src",r):o.attr("src",r)}):o.fadeOut(300,function(){o.closest(".xbox-group-control").length?o.css("background-image","url("+r+")"):o.css("background-image","url("+r+")")}),"add"==n&&o.fadeIn(300);var a=o.closest(".xbox-field").find("input.xbox-element");a.length&&a.attr("value",r);var c=o.closest(".xbox-preview-item").find(".xbox-remove-preview");c.length&&("add"==n&&a.is(":visible")&&c.show(),"remove"==n&&c.hide())}))},a.reinit_js_plugins=function(e,t){e.find(".xbox-tab").each(function(e,t){a.init_tab(i(t))}),e.find(".xbox-type-switcher input.xbox-element").each(function(e,t){i(t).xboxSwitcher("destroy"),a.init_switcher(i(t))}),e.find(".xbox-type-number .xbox-field.xbox-has-spinner").each(function(e,t){a.init_spinner(i(t))}),e.find(".xbox-has-icheck .xbox-radiochecks.init-icheck").each(function(e,t){a.destroy_icheck(i(t)),a.init_checkbox(i(t))}),e.find(".xbox-colorpicker-color").each(function(e,t){a.init_colorpicker(i(t))}),e.find(".ui.selection.dropdown").each(function(e,t){a.init_dropdown(i(t))}),e.find(".xbox-group-control.xbox-sortable").each(function(e,t){a.init_sortable_group_items(i(t))}),e.find(".xbox-repeatable-wrap.xbox-sortable").each(function(e,t){a.init_sortable_repeatable_items(i(t))}),e.find(".xbox-wrap-preview-multiple").each(function(e,t){a.init_sortable_preview_items(i(t))}),e.find(".xbox-code-editor").each(function(e,t){a.destroy_ace_editor(i(t)),a.init_code_editor(i(t))}),a.init_tooltip(e.find(".xbox-tooltip-handler"))},a.destroy_wp_editor=function(e){"undefined"!=typeof tinyMCEPreInit&&"undefined"!=typeof tinymce&&"undefined"!=typeof QTags&&(e.find(".quicktags-toolbar, .mce-tinymce.mce-container").remove(),tinymce.execCommand("mceRemoveEditor",!0,e.find(".wp-editor-area").attr("id")),e.addClass("init-wp-editor"))},a.on_change_wp_editor=function(e){if("undefined"!=typeof tinymce){var t=i(e.settings.selector);e.on("change mouseleave input",function(e){var i=tinymce.get(t.attr("id")).getContent();t.text(i).val(i)})}},a.init_wp_editor=function(e){if("undefined"!=typeof tinyMCEPreInit&&"undefined"!=typeof tinymce&&"undefined"!=typeof QTags){e.removeClass("init-wp-editor"),e.removeClass("html-active").addClass("tmce-active");var t=e.find(".wp-editor-area"),i=t.attr("id"),o=e.closest(".xbox-group-wrap").find(".xbox-group-item").eq(0).find(".wp-editor-area").first().attr("id");t.show();var n=jQuery.extend({},tinyMCEPreInit.mceInit[o]);n.body_class=i,n.selector="#"+i,n.mode="tmce",tinyMCEPreInit.mceInit[i]=n,tinymce.init(tinyMCEPreInit.mceInit[i]);var r=jQuery.extend({},tinyMCEPreInit.qtInit[o]);r.id=i,new QTags(i),QTags._buttonsInit()}},a.init_switcher=function(e){e=o(e)?i(".xbox-type-switcher input.xbox-element"):e,e.xboxSwitcher()},a.init_spinner=function(e){e=o(e)?i(".xbox-type-number .xbox-field.xbox-has-spinner"):e,e.spinner("delay",300),e.spinner("changing",function(e,t,o){i(this).trigger("xbox_changed_value",t)})},a.init_tab=function(e){e=o(e)?i(".xbox-tab"):e,e.find(".xbox-tab-nav .xbox-item").removeClass("active"),e.find(".xbox-accordion-title").removeClass("active");var t="responsive";e.closest("#side-sortables").length&&(t="accordion"),e.xboxTabs({collapsible:!0,type:t})},a.init_tooltip=function(e){e=o(e)?i(".xbox-tooltip-handler"):e,e.each(function(e,t){var n="",r=i(t).data("tipso-title"),a="left";o(r)||(n="<h3>"+r+"</h3>"),i(t).tipso({delay:10,speed:100,offsetY:2,position:a,titleContent:n,onBeforeShow:function(e,o,n){i(n.tipso_bubble).addClass(i(t).closest(".xbox").data("skin"))},onShow:function(e,t,i){}})})},a.init_checkbox=function(e){e=o(e)?i(".xbox-has-icheck .xbox-radiochecks.init-icheck"):e,e.find("input").iCheck({radioClass:"iradio_flat-blue",checkboxClass:"icheckbox_flat-blue"})},a.destroy_icheck=function(e){e.find("input").each(function(e,t){i(t).attr("style",""),i(t).next("ins").remove(),i(t).unwrap()})},a.init_image_selector=function(e){e=o(e)?i(".xbox-type-image_selector .init-image-selector, .xbox-type-import .init-image-selector"):e,e.xboxImageSelector({active_class:"xbox-active"})},a.init_dropdown=function(e){e=o(e)?i(".ui.selection.dropdown"):e,e.each(function(e,t){var o=parseInt(i(t).data("max-selections")),n=i(t).find('input[type="hidden"]').val();o>1&&i(t).hasClass("multiple")?(i(t).dropdown({maxSelections:o}),i(t).dropdown("set selected",n.split(","))):i(t).dropdown()})},a.on_focusout_input_colorpicker=function(e){var t=i(this).val();return i(this).attr("value",t),i(this).next().find(".xbox-colorpicker-color").attr("value",t).css("background-color",t),!1},a.init_colorpicker=function(e){e=o(e)?i(".xbox-colorpicker-color"):e,e.colorPicker({cssAddon:".cp-color-picker {margin-top:6px;}",buildCallback:function(e){},renderCallback:function(e,t){var i=e.closest(".xbox-field");this.$UI.find(".cp-alpha").toggle(i.hasClass("xbox-has-alpha"));var o=this.color.toString("rgb",!0);i.hasClass("xbox-has-alpha")||(o="#"+this.color.colors.HEX),o=o.indexOf("NAN")>-1?"":o,i.find("input").attr("value",o),i.find(".xbox-colorpicker-color").attr("value",o).css("background-color",o),i.find("input").trigger("change")}})},a.destroy_ace_editor=function(e){var t=e.closest(".xbox-field").find("textarea.xbox-element");e.text(t.val())},a.init_code_editor=function(e){e=o(e)?i(".xbox-code-editor"):e,e.each(function(e,t){var o=ace.edit(i(t).attr("id")),n=i(t).data("language"),r=i(t).data("theme");o.setTheme("ace/theme/"+r),o.getSession().setMode("ace/mode/"+n),o.setFontSize(15),o.setShowPrintMargin(!1),o.getSession().on("change",function(e){i(t).closest(".xbox-field").find("textarea.xbox-element").text(o.getValue())}),ace.config.loadModule("ace/ext/language_tools",function(){o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0})})})},a.init_sortable_preview_items=function(e){e=o(e)?i(".xbox-wrap-preview-multiple"):e,e.sortable({items:".xbox-preview-item",placeholder:"xbox-preview-item xbox-sortable-placeholder",start:function(e,t){t.placeholder.css({width:t.item.css("width"),height:t.item.css("height")})}}).disableSelection()},a.init_sortable_repeatable_items=function(e){e=o(e)?i(".xbox-repeatable-wrap.xbox-sortable"):e,e.sortable({handle:".xbox-sort-item",items:".xbox-repeatable-item",placeholder:"xbox-repeatable-item xbox-sortable-placeholder",start:function(e,t){t.placeholder.css({width:t.item.css("width"),height:t.item.css("height")})},update:function(e,t){},stop:function(e,t){var o=i(e.target);o.trigger("sort_repeatable_items")}}).disableSelection()},a.init_sortable_group_items=function(e){e=o(e)?i(".xbox-group-control.xbox-sortable"):e,e.sortable({items:".xbox-group-control-item",placeholder:"xbox-sortable-placeholder",start:function(e,t){t.placeholder.css({width:t.item.css("width"),height:t.item.css("height")})},update:function(e,t){var o,n=i(e.target),r=n.next(".xbox-group-wrap"),a=t.item.attr("data-index"),c=n.find(".xbox-group-control-item").index(t.item),s=r.children(".xbox-group-item[data-index="+a+"]"),l=r.children(".xbox-group-item[data-index="+c+"]"),x=0;a<c?(s.insertAfter(l),x=a,o=c):(s.insertBefore(l),x=c,o=a),r.trigger("xbox_on_sortable_group_item",[a,c]),n.trigger("sort_group_control_items"),r.trigger("sort_group_items",[x,o]),t.item.hasClass("xbox-active")&&t.item.trigger("click")}}).disableSelection()},a.add_repeatable_item=function(e){var t=i(this),o=t.closest(".xbox-repeatable-wrap");o.trigger("xbox_before_add_repeatable_item");var n=t.prev(".xbox-repeatable-item"),r=parseInt(n.data("index")),c=n.clone(),s=i("<div />",{class:c.attr("class"),"data-index":r+1,style:"display: none"});return a.set_changed_values(c,o.closest(".xbox-row").data("field-type")),s.html(c.html()),n.after(s),s.slideDown(150,function(){o.trigger("sort_repeatable_items"),a.reinit_js_plugins(s,n)}),o.trigger("xbox_after_add_repeatable_item"),!1},a.remove_repeatable_item=function(e){var t=i(this).closest(".xbox-repeatable-wrap");if(t.find(".xbox-repeatable-item").length>1){t.trigger("xbox_before_remove_repeatable_item");var o=i(this).closest(".xbox-repeatable-item");o.slideUp(150,function(){o.remove(),t.trigger("sort_repeatable_items"),t.trigger("xbox_after_remove_repeatable_item")})}return!1},a.sort_repeatable_items=function(e){var t=i(e.target),o=parseInt(t.closest('[class*="xbox-row"]').data("row-level"));t.find(".xbox-repeatable-item").each(function(e,t){a.update_attributes(i(t),e,o),i(t).find(".wp-editor-wrap").each(function(e,t){a.destroy_wp_editor(i(t))}),a.update_fields_on_item_active(i(t))})},a.new_group_item=function(e){i(e.currentTarget).hasClass("xbox-duplicate-group-item")?(a.duplicate=!0,e.stopPropagation()):a.duplicate=!1;var t=i(this).closest(".xbox-type-group"),o=a.add_group_control_item(e,i(this)),n=a.add_group_item(e,i(this)),r={event:e,$btn:i(this),$group:t,duplicate:a.duplicate,$group_item:n,$control_item:o,index:n.data("index"),type:n.data("type")};return t.trigger("xbox_after_add_group_item",[r]),o.trigger("click"),!1},a.add_group_control_item=function(e,t){var o=t.data("item-type"),n=t.closest(".xbox-type-group"),r=n.find(".xbox-group-wrap").first(),c=t.closest(".xbox-type-group").find(".xbox-group-control").first(),s=c.find(".xbox-group-control-item").last();if(a.duplicate){var l=t.closest(".xbox-group-control-item").index();s=c.children(".xbox-group-control-item").eq(l),o=s.find(".xbox-input-group-item-type").val()}var x=parseInt(s.data("index")),d={event:e,$btn:t,$group:n,duplicate:a.duplicate,$group_item:r.children(".xbox-group-item").eq(x),$control_item:s,index:x,type:o};n.trigger("xbox_before_add_group_item",[d]);var p=(parseInt(s.closest(".xbox-row").data("row-level")),s.clone()),u=i("<li />",{class:p.attr("class"),"data-index":x+1,"data-type":o});if(u.html(p.html()),s.after(u),u=s.next(".xbox-group-control-item"),u.alterClass("control-item-type-*","control-item-type-"+o),u.find("input.xbox-input-group-item-type").val(o),c.trigger("sort_group_control_items"),a.duplicate===!1&&u.find(".xbox-control-image").length&&u.find(".xbox-control-image").css("background-image","url()"),a.duplicate===!1){var _=u.find(".xbox-inner input");if(_.length){var b=c.data("control-name").toString();_.attr("value",b.replace(/(#\d?)/g,"#"+(x+2))),t.hasClass("xbox-custom-add")&&_.attr("value",t.text())}}return u},a.add_group_item=function(e,t){var o=t.data("item-type"),n=t.closest(".xbox-type-group").find(".xbox-group-wrap").first(),r=n.children(".xbox-group-item").last();if(a.duplicate){var c=t.closest(".xbox-group-control-item").index();r=n.children(".xbox-group-item").eq(c),o=t.closest(".xbox-group-control-item").find(".xbox-input-group-item-type").val()}var s=parseInt(r.data("index")),l=parseInt(r.closest(".xbox-row").data("row-level")),x=r.clone(),d=a.cook_group_item(x,l,s),p=i("<div />",{class:x.attr("class"),"data-index":s+1,"data-type":o});return p.html(d.html()),r.after(p),p=r.next(".xbox-group-item"),p.alterClass("group-item-type-*","group-item-type-"+o),n.trigger("sort_group_items",[s+1]),a.reinit_js_plugins(p,r),a.duplicate===!1&&a.set_default_values(p,l),p},a.cook_group_item=function(e,t,o){var n=o+1;return a.duplicate?a.set_changed_values(e):(e.find(".xbox-group-wrap").each(function(e,t){i(t).find(".xbox-group-item").first().addClass("xbox-active").siblings().remove(),i(t).prev(".xbox-group-control").children(".xbox-group-control-item").first().addClass("xbox-active").siblings().remove()}),e.find(".xbox-repeatable-wrap").each(function(e,t){i(t).find(".xbox-repeatable-item").not(":first").remove()})),a.update_attributes(e,n,t),e},a.set_changed_values=function(e,t){var o;e.find(".xbox-field").each(function(e,n){var r=t||i(n).closest(".xbox-row").data("field-type");switch(r){case"text":case"number":case"oembed":case"file":case"image":o=i(n).find("input.xbox-element"),o.attr("value",o.val())}})},a.remove_group_item=function(e){e.preventDefault(),e.stopPropagation();var t=i(this),o=t.closest(".xbox-group-control");return 1==o.children(".xbox-group-control-item").length?(i.xboxConfirm({title:"The last item cannot be deleted",content:"This is the only item left and cannot be deleted, please add others to delete this one.",confirm_class:"xbox-btn-blue",confirm_text:XBOX_JS.text.popup.accept_button,hide_cancel:!0}),!1):(i.xboxConfirm({title:XBOX_JS.text.remove_item_popup.title,content:XBOX_JS.text.remove_item_popup.content,confirm_class:"xbox-btn-blue",confirm_text:XBOX_JS.text.popup.accept_button,cancel_text:XBOX_JS.text.popup.cancel_button,onConfirm:function(){setTimeout(function(){a.remove_group_control_item(t),a._remove_group_item(t)},150)}}),!1)},a.remove_group_control_item=function(e){var t=e.closest(".xbox-group-control");if(t.children(".xbox-group-control-item").length>1){var i=e.closest(".xbox-group-control-item");i.fadeOut(200,function(){i.remove(),t.trigger("sort_group_control_items")})}},a._remove_group_item=function(e){var t=e.closest(".xbox-type-group"),i=t.find(".xbox-group-wrap").first(),o=e.closest(".xbox-group-control"),n=e.closest(".xbox-group-control-item").index();if(i.children(".xbox-group-item").length>1){t.trigger("xbox_before_remove_group_item");var r=i.children(".xbox-group-item").eq(n);r.fadeOut(200,function(){r.remove(),i.trigger("sort_group_items",[n]),o.children(".xbox-group-control-item").eq(0).trigger("click"),t.trigger("xbox_after_remove_group_item",[n])})}},a.on_click_group_control_item=function(e){var t=i(this);return a.active_control_item(t),!1},a.active_control_item=function(e){var t=e.parent(),i=e.index(),o=t.closest(".xbox-type-group"),n=o.find(".xbox-group-wrap").first(),r=n.children(".xbox-group-item").eq(i);t.children(".xbox-group-control-item").removeClass("xbox-active"),e.addClass("xbox-active"),n.children(".xbox-group-item").removeClass("xbox-active"),r.addClass("xbox-active");var c={$group_item:r,$control_item:e,index:r.data("index"),type:r.data("type")};return o.trigger("xbox_on_active_group_item",[c]),a.update_fields_on_item_active(r),!1},a.update_fields_on_item_active=function(e){e.find(".wp-editor-wrap.init-wp-editor").each(function(e,t){a.init_wp_editor(i(t))})},a.sort_group_control_items=function(e){var t=i(e.target),o=parseInt(t.closest(".xbox-row").data("row-level"));t.children(".xbox-group-control-item").each(function(e,t){a.update_group_control_item(i(t),e,o)})},a.sort_group_items=function(e,t,o){var n=i(e.target);n.trigger("xbox_before_sort_group");var r=parseInt(n.closest(".xbox-row").data("row-level"));o=void 0!==o?parseInt(o)+1:void 0;var c=n.children(".xbox-group-item"),s=c.slice(t,o);s.each(function(e,t){var o=n.find(i(t)).index();a.update_attributes(i(t),o,r),i(t).find(".wp-editor-wrap").each(function(e,t){a.destroy_wp_editor(i(t))})}),n.trigger("xbox_after_sort_group")},a.update_group_control_item=function(e,t,o){e.data("index",t).attr("data-index",t),e.find(".xbox-info-order-item").text("#"+(t+1));var n;e.find(".xbox-inner input").length&&(n=e.find(".xbox-inner input").val(),e.find(".xbox-inner input").val(n.replace(/(#\d+)/g,"#"+(t+1)))),e.find("*[name]").each(function(e,n){a.update_name_ttribute(i(n),t,o)})},a.update_attributes=function(e,t,o){e.data("index",t).attr("data-index",t),e.find("*[name]").each(function(e,n){a.update_name_ttribute(i(n),t,o)}),e.find("*[id]").each(function(e,n){a.update_id_attribute(i(n),t,o)}),e.find("label[for]").each(function(e,n){a.update_for_attribute(i(n),t,o)}),e.find("*[data-field-name]").each(function(e,n){a.update_data_name_attribute(i(n),t,o)}),e.find("*[data-editor]").each(function(e,n){a.update_data_editor_attribute(i(n),t,o)}),e.find("*[data-wp-editor-id]").each(function(e,n){a.update_data_wp_editor_id_attribute(i(n),t,o)}),a.set_checked_inputs(e,o)},a.set_checked_inputs=function(e,t){e.find(".xbox-field").each(function(e,t){if(i(t).hasClass("xbox-has-icheck")||i(t).closest(".xbox-type-image_selector").length){var o=i(t).find('input[type="radio"], input[type="checkbox"]');o.each(function(e,t){i(t).parent("div").hasClass("checked")?i(t).attr("checked","checked").prop("checked",!0):i(t).removeAttr("checked").prop("checked",!1),i(t).next("img").hasClass("xbox-active")&&i(t).attr("checked","checked").prop("checked",!0)})}})},a.update_name_ttribute=function(e,t,i){var o=e.attr("name"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(\[\d+\])/g,o,"["+t+"]",i),e.attr("name",n))},a.update_id_attribute=function(e,t,i){var o=e.attr("id"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(__\d+__)/g,o,"__"+t+"__",i),e.attr("id",n))},a.update_for_attribute=function(e,t,i){var o=e.attr("for"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(__\d+__)/g,o,"__"+t+"__",i),e.attr("for",n))},a.update_data_name_attribute=function(e,t,i){var o=e.attr("data-field-name"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(\[\d+\])/g,o,"["+t+"]",i),e.attr("data-field-name",n))},a.update_data_editor_attribute=function(e,t,i){var o=e.attr("data-editor"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(__\d+__)/g,o,"__"+t+"__",i),e.attr("data-editor",n))},a.update_data_wp_editor_id_attribute=function(e,t,i){var o=e.attr("data-wp-editor-id"),n="";"undefined"!=typeof o&&(n=a.nice_replace(/(__\d+__)/g,o,"__"+t+"__",i),e.attr("data-wp-editor-id",n))},a.set_default_values=function(e,t){e.find("*[data-default]").each(function(e,t){var o=i(t),n=o.data("default");if(o.closest(".xbox-type-number").length){var r=o.find(".xbox-unit").data("unit");a.set_field_value(o,n,r)}else a.set_field_value(o,n)})},a.set_field_value=function(e,t,r){var a,c,s=e.closest(".xbox-row").data("field-type");switch(t=o(t)?"":t,s){case"number":e.find("input.xbox-element").attr("value",t);var l=r;void 0===r&&(l=e.find(".xbox-unit").data("unit")),e.find("input.xbox-unit-number").attr("value",r).trigger("change"),l=""===l?"#":l,e.find(".xbox-unit span").text(l);break;case"text":case"colorpicker":e.find("input.xbox-element").attr("value",t),"colorpicker"==s&&e.find(".xbox-colorpicker-color").attr("value",t).css("background-color",t);break;case"file":case"oembed":e.find("input.xbox-element").attr("value",t),e.find(".xbox-wrap-preview").html("");break;case"image":e.find("input.xbox-element").attr("value",t),e.find("img.xbox-element-image").attr("src",t),o(t)&&e.find("img.xbox-element-image").hide().next(".xbox-remove-preview").hide();break;case"select":var x=e.find(".ui.selection.dropdown"),d=parseInt(x.data("max-selections"));x.dropdown("clear"),d>1&&x.hasClass("multiple")?x.dropdown("set selected",t.split(",")):x.dropdown("set selected",t);
break;case"switcher":a=e.find("input"),a.val()!==t&&(a.next().hasClass("xbox-sw-on")?a.xboxSwitcher("set_off"):a.xboxSwitcher("set_on"));break;case"wp_editor":var p=e.find("textarea.wp-editor-area");p.val(t);var u=tinymce.get(p.attr("id"));u&&u.setContent(t);break;case"textarea":e.find("textarea").text(t);break;case"code_editor":e.find("textarea.xbox-element").text(t);var _=ace.edit(e.find(".xbox-code-editor").attr("id"));_.setValue(t);break;case"icon_selector":e.find("input.xbox-element").attr("value",t).trigger("change");var b="";b=t.indexOf(".svg")>-1?'<img src="'+t+'">':'<i class="'+t+'"></i>',e.find(".xbox-icon-active").html(b);break;case"image_selector":if(t=t.toString().toLowerCase(),a=e.find("input"),a.closest(".xbox-image-selector").data("image-selector").like_checkbox)n(a,",").toLowerCase()!=t&&(a.first().trigger("img_selector_disable_all"),c=t.replace(/ /g,"").split(","),i.each(c,function(e){a.filter(function(t){return i(this).val().toLowerCase()==c[e]}).trigger("click.img_selector")}));else{if(o(a.filter(":checked").val()))return;a.filter(":checked").val().toLowerCase()!=t&&a.filter(function(e){return i(this).val().toLowerCase()==t}).trigger("click.img_selector")}break;case"checkbox":case"radio":if(t=t.toString().toLowerCase(),e.hasClass("xbox-has-icheck")&&e.find(".init-icheck").length)if(a=e.find("input"),"radio"==s){if(o(a.filter(":checked").val()))return;a.iCheck("uncheck"),a.filter(function(e){return i(this).val().toLowerCase()==t}).iCheck("check")}else"checkbox"==s&&n(a,",").toLowerCase()!=t&&(a.iCheck("uncheck"),c=t.replace(/ /g,"").split(","),i.each(c,function(e){a.filter(function(t){return i(this).val().toLowerCase()==c[e]}).iCheck("check")}))}},a.nice_replace=function(e,t,i,o,n){n=n||0;var r=0;return t=t.replace(e,function(e,t,a){return r++,r===o+n?i:e})},a.get_object_id=function(){return i(".xbox").data("object-id")},a.get_object_type=function(){return i(".xbox").data("object-type")},a.get_group_object_values=function(e){var t=e.find("input[name],select[name],textarea[name]").serializeArray();return t},a.get_group_values=function(e){var t=a.get_group_object_values(e),o={};return i.each(t,function(e,t){o[t.name]=t.value}),o},a.compare_values_by_operator=function(e,t,i){switch(t){case"<":return e<i;case"<=":return e<=i;case">":return e>i;case">=":return e>=i;case"==":case"=":return e==i;case"!=":return e!=i;default:return!1}return!1},a.add_style_attribute=function(e,t){var i=e.attr("style")||"";e.attr("style",i+"; "+t)},i(function(){a.init()}),a}(window,document,jQuery),function(e){e.fn.alterClass=function(t,i){var o=this;if(t.indexOf("*")===-1)return o.removeClass(t),i?o.addClass(i):o;var n=new RegExp("\\s"+t.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return o.each(function(t,i){for(var o=" "+i.className+" ";n.test(o);)o=o.replace(n," ");i.className=e.trim(o)}),i?o.addClass(i):o}}(jQuery);